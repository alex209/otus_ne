# Лабораторная №10

## Масштабируемость и дизайн iBGP

### Цели задания

- Настроить iBGP в офисе Москва
- Настроить iBGP в сети провайдера Триада
- Организовать полную IP связанность всех сетей

### Топология сети

![](./img/lab_10.png)

### Задачи

- Настроите iBGP в офисом Москва между маршрутизаторами R14 и R15.
- Настроите iBGP в провайдере Триада, с использованием RR.
- Настройте офиса Москва так, чтобы приоритетным провайдером стал Ламас.
- Настройте офиса С.-Петербург так, чтобы трафик до любого офиса распределялся по двум линкам одновременно.
- Все сети в лабораторной работе должны иметь IP связность.
- План работы и изменения зафиксированы в документации.

Для построения iBGP в провайдере Триада с использованием Route Reflector (RR) создадим дополнительный линк R24-R25

## Таблица адресов

IPv4 адреса для оборудования берутся из предыдущей [лабораторной работы #4](../lab_04/README.md) и [лабораторной работы #9](../lab_09/README.md)

## AS 520 (Триада)

### IPv4 адреса

| Device | Interface | IP Address    | Subnet Mask     | Default Gateway | Description   |
| ------ | --------- | ------------- | --------------- | --------------- | ------------- |
| R23    | lo0       | 10.52.0.23    | 255.255.255.255 |                 | Loopback_R23  |
|        | e0/0      | 207.231.242.6 | 255.255.255.252 |                 | to_R22_AS101  |
|        | e0/1      | 10.30.90.1    | 255.255.255.252 |                 | to_R25        |
|        | e0/2      | 10.30.90.5    | 255.255.255.252 |                 | to_R24        |
| R24    | lo0       | 10.52.0.24    | 255.255.255.255 |                 | Loopback_R24  |
|        | e0/0      | 128.249.165.2 | 255.255.255.252 |                 | to_R21_AS301  |
|        | e0/1      | 10.30.90.13   | 255.255.255.252 |                 | to_R26        |
|        | e0/2      | 10.30.90.6    | 255.255.255.252 |                 | to_R23        |
|        | e0/3      | 67.73.193.1   | 255.255.255.252 |                 | to_R18_AS2042 |
|        | e1/0      | 10.30.90.17   | 255.255.255.252 |                 | to_R25        |
| R25    | lo0       | 10.52.0.25    | 255.255.255.255 |                 | Loopback_R25  |
|        | e0/0      | 10.30.90.2    | 255.255.255.252 |                 | to_R23        |
|        | e0/1      | 67.73.196.5   | 255.255.255.252 |                 | to_R27_ext    |
|        | e0/2      | 10.30.90.9    | 255.255.255.252 |                 | to_R26        |
|        | e0/3      | 67.73.196.1   | 255.255.255.252 |                 | to_R28_ext    |
|        | e1/0      | 10.30.90.18   | 255.255.255.252 |                 | to_R24        |
| R26    | lo0       | 10.52.0.26    | 255.255.255.255 |                 | Loopback_R26  |
|        | e0/0      | 10.30.90.14   | 255.255.255.252 |                 | to_R24        |
|        | e0/1      | 8.242.244.1   | 255.255.255.252 |                 | to_R28_ext    |
|        | e0/2      | 10.30.90.10   | 255.255.255.252 |                 | to_R25        |
|        | e0/3      | 64.210.65.1   | 255.255.255.252 |                 | to_R18_AS2042 |

### IPv6 адреса

| Device | Interface | IPv6 Address              | IPv6 link-local         | Default Gateway | Description   |
| ------ | --------- | ------------------------- | ----------------------- | --------------- | ------------- |
| R23    | lo0       | 2001:DB8::520:23/128      |                         |                 | Loopback_R23  |
|        | e0/0      | 2001:1860:4000:300::6/64  |                         |                 | to_R22_AS101  |
|        | e0/1      | 2001:DB8:520:2325::23/64  | FE80:520::23 link-local |                 | to_R25        |
|        | e0/2      | 2001:DB8:520:2324::23/64  | FE80:520::23 link-local |                 | to_R24        |
| R24    | lo0       | 2001:DB8::520:24/128      |                         |                 | Loopback_R24  |
|        | e0/0      | 2620:0:5070:301::2/64     |                         |                 | to_R21_AS301  |
|        | e0/1      | 2001:DB8:520:2426::24/64  | FE80:520::24 link-local |                 | to_R26        |
|        | e0/2      | 2001:DB8:520:2324::24/64  | FE80:520::24 link-local |                 | to_R23        |
|        | e0/3      | 2C0F:F400:10FF:1::1/64    |                         |                 | to_R18_AS2042 |
|        | e1/0      | 2001:DB8:520:2425::24/64  |                         |                 | to_R25        |
| R25    | lo0       | 2001:DB8::520:25/128      |                         |                 | Loopback_R25  |
|        | e0/0      | 2001:DB8:520:2325::25/64  | FE80:520::25 link-local |                 | to_R23        |
|        | e0/1      | 2001:678:5B0:2527::5/64   |                         |                 | to_R27_ext    |
|        | e0/2      | 22001:DB8:520:2526::25/64 | FE80:520::25 link-local |                 | to_R26        |
|        | e0/3      | 2001:678:ADC:2528::1/64   |                         |                 | to_R28_ext    |
|        | e1/0      | 2001:DB8:520:2425::25/64  | FE80:520::25 link-local |                 | to_R24        |
| R26    | lo0       | 2001:DB8::520:26/128      |                         |                 | Loopback_R26  |
|        | e0/0      | 2001:DB8:520:2426::26/64  | FE80:520::26 link-local |                 | to_R24        |
|        | e0/1      | 2001:67C:94C:2628::1/64   |                         |                 | to_R28_ext    |
|        | e0/2      | 2001:DB8:2526::26/64      | FE80:520::26 link-local |                 | to_R25        |
|        | e0/3      | 2C0F:F400:10FF:2::1/64    |                         |                 | to_R18_AS2042 |

## AS 1001 (Москва)

### IPv4 адреса

| Device | Interface | IP Address    | Subnet Mask     | Default Gateway | Description  |
| ------ | --------- | ------------- | --------------- | --------------- | ------------ |
| R14    | lo0       | 10.100.100.14 | 255.255.255.255 |                 | Loopback_R14 |
|        | e0/2      | 207.231.240.2 | 255.255.255.252 |                 | to_R22_AS101 |
|        | e1/0      | 10.10.90.41   | 255.255.255.252 |                 | to_R15       |
| R15    | lo0       | 10.100.100.15 | 255.255.255.255 |                 | Loopback_R15 |
|        | e0/2      | 128.249.190.2 | 255.255.255.252 |                 | to_R21_AS301 |
|        | e1/0      | 10.10.90.42   | 255.255.255.252 |                 | to_R14       |

### IPv6 адреса

| Device | Interface | IPv6 Address             | Default Gateway | Description  |
| ------ | --------- | ------------------------ | --------------- | ------------ |
| R14    | lo0       | 2001:DB8::1001:14/128    |                 | Loopback_R14 |
|        | e0/2      | 2001:1860:4000:100::2/64 |                 | to_R22_AS101 |
|        | e1/0      | 2001:DB8:1415::14/64     |                 |              |
| R15    | lo0       | 2001:DB8::1001:15/128    |                 | Loopback_R15 |
|        | e0/2      | 2001:468:1A08:1001::2/64 |                 | to_R21_AS301 |
|        | e1/0      | 2001:DB8:1415::15/64     |                 |              |

## AS 2042 (С.-Петербург)

### IPv4 адреса

| Device | Interface | IP Address    | Subnet Mask     | Default Gateway | Description  |
| ------ | --------- | ------------- | --------------- | --------------- | ------------ |
| R18    | lo0       | 10.200.100.18 | 255.255.255.255 |                 | Loopback_R18 |
|        | e0/2      | 67.73.193.2   | 255.255.255.252 |                 | to_R24_AS520 |
|        | e0/3      | 64.210.65.2   | 255.255.255.252 |                 | to_R26_As520 |

### IPv6 адреса

| Device | Interface | IPv6 Address           | Default Gateway | Description  |
| ------ | --------- | ---------------------- | --------------- | ------------ |
| R18    | lo0       | 2001:DB8::2042:18/128  |                 | Loopback_R23 |
|        | e0/2      | 2C0F:F400:10FF:1::2/64 |                 | to_R24_AS520 |
|        | e0/3      | 2C0F:F400:10FF:2::2/64 |                 | to_R26_AS520 |
