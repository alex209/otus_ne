!
! No configuration change since last restart
! NVRAM config last updated at 17:01:43 UTC Thu Sep 18 2025
!
version 17.12
service timestamps debug datetime msec
service timestamps log datetime msec
!
hostname R1
!
boot-start-marker
boot-end-marker
!
!
no aaa new-model
!
!
!
!
!
!
!
!
!
!
!
!
!
ip host CA 192.168.200.3
ip host ca.abc.ru 192.168.200.3
ip domain name abc.ru
ip cef
login on-success log
no ipv6 cef
!
!
!
!
!
!
!
!
multilink bundle-name authenticated
!
!
crypto pki trustpoint CA
 enrollment url http://ca.abc.ru:80
 serial-number
 subject-name CN=R1, O=ABC, C=RU
 revocation-check crl
 hash sha256
!
!
crypto pki certificate chain CA
 certificate 02
  30820345 3082022D A0030201 02020102 300D0609 2A864886 F70D0101 0B050030
  28310B30 09060355 04061302 5255310C 300A0603 55040A13 03414243 310B3009
  06035504 03130243 41301E17 0D323530 39303631 36303032 375A170D 32363039
  30363136 30303237 5A305331 0B300906 03550406 13025255 310C300A 06035504
  0A130341 4243310B 30090603 55040313 02523131 29300F06 03550405 13083735
  34393935 32313016 06092A86 4886F70D 01090216 0952312E 6162632E 72753082
  0122300D 06092A86 4886F70D 01010105 00038201 0F003082 010A0282 0101009D
  E898F1CE 2F190C4A AAC006E5 AD1C5E2F 68DE83BD 3F126DD9 92E4A78B E51B391D
  047B650F FDBE972E 60ED5088 4FCD0F60 D011BB2B 3D48820B 40356CE5 E7EC9B02
  7A083212 D9AFD94A E7B71856 E93159C2 05B2FE82 2F3A9BFA 4E44D218 B2477F3C
  E10E4433 F2283844 C052433D CDBE3094 5470FDF7 3D4AA1FF 883B9909 BD2DF263
  539C6558 C283B8CF 15E35491 743FD831 B9F4E191 97143BFD A1535B5B E813A9F2
  64EED2E4 2F1A332D 635A7B75 15B1CE99 F961308F 4DC4682B 559B49F8 93C7C10E
  B2396EAF 89DE4345 A3843D9A 57C3F0A9 2AC0B9C4 DDB4B182 80EFBE52 47EA6B06
  3D539FD6 41AD9359 A9C031E2 092CC524 7EE972B4 02F018C3 8F2701E0 937CA702
  03010001 A34F304D 300B0603 551D0F04 04030205 A0301F06 03551D23 04183016
  80142462 A586F431 239E459C AAD93FCD F07971B9 F89D301D 0603551D 0E041604
  14FA84B9 2249643F 80C182FD B348BFCA 603A6DCA D7300D06 092A8648 86F70D01
  010B0500 03820101 00030035 55EF2DE3 C36EDD27 A11380E7 27EE2856 61C2D97C
  2686B4F9 D60277ED 8E767BD3 BDECEBB3 224D499C 378BB689 81C2370B 2C6A0B14
  B0CB7AEB 5D4367EB 8310CC3C D18200B2 1A6C7F39 3A45D300 70A2647F 63CC471C
  18C4A292 AF0D660B 985DC238 B4D088FC 7F77F1BC 4B7873CF DCD6F4F2 CB2DFC54
  DA2FEF82 ADB3ECFD 15A6EC18 C6F566FC B7E6BE29 CBE126A2 30D4A7EB 81B847DC
  74A81B3D 197161C6 B26F00EE 26660E64 6E494D9F A5251F0D DD53905F 260A31C2
  598E2AED A47F95BB 6269C148 CA3DCD2C FFB064A3 4764D54F B8446AB6 A41D0B73
  4DD94B3F BA116CF9 ABE014DF 222683AE 8FB7CE6E EF91BD41 1042F412 DC0B41C4
  FF3CFD28 97D3B642 4E
        quit
 certificate ca 01
  3082032E 30820216 A0030201 02020101 300D0609 2A864886 F70D0101 0B050030
  28310B30 09060355 04061302 5255310C 300A0603 55040A13 03414243 310B3009
  06035504 03130243 41301E17 0D323530 39303631 35353730 375A170D 32383039
  30353135 35373037 5A302831 0B300906 03550406 13025255 310C300A 06035504
  0A130341 4243310B 30090603 55040313 02434130 82012230 0D06092A 864886F7
  0D010101 05000382 010F0030 82010A02 82010100 CDBFE558 794496BD F64FC405
  89B09B43 9B86549C F78A542A B0E47945 8E0E981F 0A9A55DB 3957EB04 368ECB0C
  B3A18D5A C442DFD7 0E3BBC1E D173111C 9C2E490A CB46CD8F 9A817348 7488A119
  21370E38 CD8DEDD1 A30E9BE6 B9076427 95833C1B D81B14CF C9709BF3 AA7EFE0E
  6C824A22 ACA3829E FFB015A0 28AF0AEE 86BF5F9E B6F6BE1B 30BA0C17 7913A0C8
  7E34F6CB A44A78CD DAC29A20 65583438 B5BBB3C3 1E9DEE1B 51834602 EAA6EE4B
  F8C849B6 02FCB905 96ACAEBB 01A6EA0A 74223079 61D703A3 6E372EFF 1475999F
  1C70C152 1087F223 769AA7C7 92C7C856 CA5531A3 C9E4FF59 9D7853EF D2FCA83A
  C12A51EA 510C39A9 0A81E21D 12BDB804 0F024B5F 02030100 01A36330 61300F06
  03551D13 0101FF04 05300301 01FF300E 0603551D 0F0101FF 04040302 0186301F
  0603551D 23041830 16801424 62A586F4 31239E45 9CAAD93F CDF07971 B9F89D30
  1D060355 1D0E0416 04142462 A586F431 239E459C AAD93FCD F07971B9 F89D300D
  06092A86 4886F70D 01010B05 00038201 0100C31A 119A5C7B F1D4DE68 3F96B48E
  61580F15 2D0B7CAB 222D5F03 946E59B1 23F04604 935D988B FB995F28 6C451754
  2BE3F383 C27690B1 B638564F 9E981265 AF4CC089 28660539 0F9AD52C EA82808C
  C44337DC 25962473 A9869101 1ADA6215 21C84A1D 5E9EECB9 4A036F93 CD454912
  FB46118D F500E219 33F237F4 1459B089 AEF2A8D6 802372B5 117778D7 C6249E77
  B76D19F9 9B4843E8 FDEE33BB 7F5FB0AE 4BECCB07 3ADB4FBB 7B936D94 00E57E0F
  C01AA759 BB993D57 ED3D6CE8 E1073987 5D11B817 49AD8D69 38CC1E4F 3022AAC0
  25924513 81E2FD55 D3AE9E0F 9D96D37E F3FB78CC FFCB8985 B63E3964 FD55E253
  8EA35BF5 91108D9B FC7479D3 F4499F8C D0C4
        quit
!
!
memory free low-watermark processor 81225
!
!
spanning-tree mode rapid-pvst
!
!
!
!
crypto ikev2 policy policy_T0T1
 match address local 11.11.11.2
 proposal default
!
!
crypto ikev2 profile IKEv2_profile_PRIMARY
 match identity remote address 0.0.0.0
 authentication remote rsa-sig
 authentication local rsa-sig
 pki trustpoint CA
!
!
no cdp log mismatch duplex
!
!
!
!
!
!
!
!
!
!
crypto ipsec transform-set transform_PRIMARY esp-aes 256 esp-sha256-hmac
 mode transport
!
crypto ipsec profile IPSEC-profile_PRIMARY
 set transform-set transform_PRIMARY
 set ikev2-profile IKEv2_profile_PRIMARY
!
!
!
!
!
!
!
!
interface Tunnel0
 description Primary_TUN
 ip address 172.16.0.1 255.255.255.0
 no ip redirects
 ip nhrp network-id 100
 bfd interval 100 min_rx 100 multiplier 3
 tunnel source Ethernet0/0
 tunnel mode gre multipoint
 tunnel key 100
 tunnel protection ipsec profile IPSEC-profile_PRIMARY shared
!
interface Tunnel1
 description BackUp_TUN
 ip address 172.16.1.1 255.255.255.0
 no ip redirects
 ip nhrp network-id 200
 bfd interval 200 min_rx 200 multiplier 5
 tunnel source Ethernet0/0
 tunnel mode gre multipoint
 tunnel key 200
 tunnel protection ipsec profile IPSEC-profile_PRIMARY shared
!
interface Ethernet0/0
 ip address 11.11.11.2 255.255.255.0
 ip nat outside
!
interface Ethernet0/1
 ip address 12.12.12.2 255.255.255.0
!
interface Ethernet0/2
 ip address 192.168.200.1 255.255.255.0
 ip nat inside
!
interface Ethernet0/3
 ip address 192.168.100.11 255.255.255.0
 ip nat inside
 vrrp 1 ip 192.168.100.1
 vrrp 1 priority 110
!
router bgp 12
 bgp log-neighbor-changes
 bgp listen range 172.16.1.0/24 peer-group SPOKE
 bgp listen range 172.16.0.0/24 peer-group SPOKE
 bgp default local-preference 200
 neighbor SPOKE peer-group
 neighbor SPOKE remote-as 3456
 neighbor SPOKE fall-over bfd
 neighbor 11.11.11.1 remote-as 111
 neighbor 12.12.12.1 remote-as 222
 neighbor 192.168.100.12 remote-as 12
 !
 address-family ipv4
  network 192.168.100.0
  network 192.168.200.0
  neighbor SPOKE activate
  neighbor SPOKE prefix-list pl_LAN out
  neighbor 11.11.11.1 activate
  neighbor 11.11.11.1 weight 40000
  neighbor 11.11.11.1 prefix-list pl_RFC_1918 out
  neighbor 11.11.11.1 filter-list 1 out
  neighbor 12.12.12.1 activate
  neighbor 12.12.12.1 prefix-list pl_RFC_1918 out
  neighbor 12.12.12.1 filter-list 1 out
  neighbor 192.168.100.12 activate
  neighbor 192.168.100.12 next-hop-self
 exit-address-family
!
ip forward-protocol nd
!
ip as-path access-list 1 permit ^$
!
ip http server
ip http secure-server
ip nat inside source static 192.168.200.3 11.11.11.3
ip ssh bulk-mode 131072
!
!
ip prefix-list pl_LAN seq 10 permit 192.168.0.0/16 le 32
!
ip prefix-list pl_RFC_1918 seq 10 deny 10.0.0.0/8 le 32
ip prefix-list pl_RFC_1918 seq 20 deny 172.16.0.0/12 le 32
ip prefix-list pl_RFC_1918 seq 30 deny 192.168.0.0/16 le 32
ip prefix-list pl_RFC_1918 seq 40 permit 0.0.0.0/0 le 32
ip access-list extended 101
 10 permit ip 192.168.100.0 0.0.0.255 any
!
route-map LOCALPREF permit 10
 set local-preference 700
!
route-map LOCALPREF permit 20
!
!
!
!
control-plane
!
!
!
line con 0
 logging synchronous
line aux 0
line vty 0 4
 login
 transport input ssh
!
ntp update-calendar
ntp server 8.8.8.8
!
!
!
end
