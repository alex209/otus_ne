# Лабораторная №14

## Сертификаты.

### Цели задания

- Настроить GRE поверх IPSec между офисами Москва и С.-Петербург
- Настроить DMVPN поверх IPSec между офисами Москва и Чокурдах, Лабытнанги

### Топология сети

![](./img/lab_14.png)

### Задачи

- Настроите GRE поверх IPSec между офисами Москва и С.-Петербург.
- Настроите DMVPN поверх IPSec между Москва и Чокурдах, Лабытнанги.
- Все узлы в офисах в лабораторной работе должны иметь IP связность.
- План работы и изменения зафиксированы в документации.
- Для IPSec использовать CA и сертификаты.

# Настройка устройств:

Базовая настройка и настройка IP адресов была произведена в предыдущих лабораторных работах.

Настройка GRE и DMVPN была произведена в [лабораторной работе №13](../lab_13/README.md)

<details>

<summary><H3>Настройка центра сертификатов CA и выдача клиентских сертификатов</H3></summary>

В качестве CA-сервера выберем маршрутизатор R20. На маршрутизаторе R20 настроен статический NAT и он доступен по внешнему адресу _128.249.190.3_
Также на маршрутизаторе R20 уже настроена синхронизация времени по протоколу NTP.

#### Настройка имени хоста и доменного имени

```
!
hostname R20CA
!
ip domain name otus.ru
!
ip http server
```

#### Генерация ключевой пары

```
crypto key generate rsa general-keys label R20CA modulus 2048 exportable
```

##### Key pair

!["Key pair"](./img/r20_key_pair.png)

</details>
